shallow_clone: true
version: '{build}'
skip_tags: true
environment:
  matrix:
    - nodejs_version: '5'
    - nodejs_version: '0'
    - nodejs_version: '0.10'
install:
  - ps: Install-Product node $env:nodejs_version
  - >-
      node -e "
      var fs = require('fs');
      var pkg = JSON.parse(fs.readFileSync('package.json', 'utf8'));
      var devDeps = pkg.devDependencies;
      delete devDeps['@shinnn/eslint-config-node-legacy'];
      delete devDeps.eslint;
      delete devDeps.istanbul;
      fs.writeFileSync('package.json', JSON.stringify(pkg));"
  - npm install
build: off
test_script: node test.js
cache: node_modules -> package.json
